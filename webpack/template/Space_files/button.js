!function($){"use strict";function Button(element){if(!(this instanceof Button)){var $controller=$(element).data("controller");return $controller||($controller=new Button(element),$(element).data("controller",$controller)),$controller}this.$element=$(element||TEMPLATE),this.$element.on("click",this._preventClickWhenDisabled.bind(this))}grn.base.namespace("grn.component.button");var TEMPLATE="<span class='button_grn_js'><a href='javascript:void(0);' role='button'></a></span>",CSS_normal,CSS_main,CSS_attention,CSS_disabled="button_disable_filter_grn",CSS_spinner="spinner_button1_grn",CSS_UI={normal:"button1_normal_grn",main:"button1_main_grn",attention:"button1_attention_grn"},CSS_SPACING={tight:"button1_r_margin1_grn",normal:"button1_r_margin2_grn",loose:"button1_r_margin3_grn",very_loose:"button1_r_margin4_grn"},UI={NORMAL:"normal",MAIN:"main",ATTENTION:"attention"},SPACING={TIGHT:"tight",NORMAL:"normal",LOOSE:"loose",VERY_LOOSE:"very_loose"};Button.prototype.render=function(options){if("object"!==typeof options)throw'"options" parameter is required';var $element=$(TEMPLATE);return this.$element.replaceWith($element),this.$element=$element,this.setCaption(options.caption?options.caption:""),this.setUI(options.ui?options.ui:UI.NORMAL),options.spacing&&this.setSpacing(options.spacing),options.id&&this.$element.attr("id",options.id),options.className&&this.$element.addClass(options.className),options.disabled&&this.disable(),options.autoDisable&&this.$element.attr("data-auto-disable",true),this.$element.on("click",this._preventClickWhenDisabled.bind(this)),this},Button.prototype.setUI=function(name){if(name in CSS_UI){var CSS_UI_array=[];for(var i in CSS_UI)CSS_UI_array.push(CSS_UI[i]);this.$element.removeClass(CSS_UI_array.join(" ")),this.$element.addClass(CSS_UI[name])}return this},Button.prototype.setSpacing=function(value){if(value in CSS_SPACING){var CSS_SPACING_array=[];for(var i in CSS_SPACING)CSS_SPACING_array.push(CSS_SPACING[i]);this.$element.removeClass(CSS_SPACING_array.join(" ")),this.$element.addClass(CSS_SPACING[value])}return this},Button.prototype.setCaption=function(caption){return this.$element.find("a").text(caption),this},Button.prototype.isDisabled=function(){return this.$element.hasClass(CSS_disabled)},Button.prototype.enable=function(){return this.$element.removeClass(CSS_disabled),this.$element.find("a").removeAttr("aria-disabled"),this},Button.prototype.disable=function(){return this.$element.addClass(CSS_disabled),this.$element.find("a").attr({"aria-disabled":true}),this},Button.prototype.showSpinner=function(){return this.disable(),this._getSpinner().css("display","inline-block"),this},Button.prototype.hideSpinner=function(){return this._getSpinner().hide(),this.enable(),this},Button.prototype.on=function(){return this.$element.on.apply(this.$element,arguments),this},Button.prototype.off=function(){return this.$element.off.apply(this.$element,arguments),this},Button.prototype.focus=function(){this.$element.find("a").focus()},Button.prototype._getSpinner=function(){var $spinner=this.$element.find("."+CSS_spinner);return 0!==$spinner.length?$spinner:$("<span></span>").addClass(CSS_spinner).appendTo(this.$element)},Button.prototype._preventClickWhenDisabled=function(event){this.isDisabled()&&(event.preventDefault(),event.stopImmediatePropagation())},(Button.util={}).addEventListenerForAutoDisableButton=function(){$(document).on("click",".button_grn_js",function(event){var $button_element=$(event.currentTarget),button;$button_element.data("auto-disable")&&(grn.component.button($button_element).isDisabled()||grn.component.button($button_element).showSpinner())})},Button.util.submit=function(button_element){var button=grn.component.button(button_element);button.isDisabled()||button.$element.closest("form").submit()},Button.util.redirect=function(button_element,page){var button;grn.component.button(button_element).isDisabled()||("history_back"===page?history.back():location.href=page)},Button.UI=UI,Button.SPACING=SPACING,grn.component.button=Button}(jQuery);