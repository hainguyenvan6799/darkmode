!function($){"use strict";var textarea;"undefined"!==typeof grn&&(grn.base.namespace("grn.component.textarea"),(textarea=grn.component.textarea).disableAutoInit=false);var expand_height_margin=30,narrow_gap=30;window.grn_autoexpand_textarea=function(elm){function autoexpand(){if(grn.browser.msie)elm.scrollHeight>elm.offsetHeight&&$(elm).css({height:Math.max(elm.scrollHeight+30,textarea_min_height)+"px"});else{var dummy_elm=document.getElementById("dummy_textarea_"+elm.id);if(dummy_elm.value=elm.value,$(dummy_elm).css({height:textarea_min_height+"px"}),dummy_elm.scrollHeight>dummy_elm.offsetHeight)$(dummy_elm).css({height:Math.max(dummy_elm.scrollHeight+30,textarea_min_height)+"px"});else{for(var current_height=dummy_elm.offsetHeight;dummy_elm.scrollHeight<dummy_elm.offsetHeight&&dummy_elm.offsetHeight>=textarea_min_height&&current_height>0&&(current_height=dummy_elm.offsetHeight-30,$(dummy_elm).css({height:Math.max(current_height,0)+"px"}),dummy_elm.style.height==Math.max(current_height,0)););$(dummy_elm).css({height:Math.max(dummy_elm.scrollHeight+30,textarea_min_height)+"px"})}if(prev_height!=elm.offsetHeight&&elm.offsetHeight>dummy_elm.offsetHeight)return;$(elm).css({height:dummy_elm.style.height}),prev_height=elm.offsetHeight}}var height=$(elm).css("height"),textarea_min_height=(height=null!=height&&void 0!=height.slice?parseInt(height.slice(0,-2)):$(elm).outerHeight())>30?height:31,prev_height=elm.offsetHeight;$(elm).css({minHeight:textarea_min_height+"px"}),$(elm).hasClass("noautoexpand")||($(elm).on("keyup",autoexpand),grn.browser.msie||($(elm).on("keydown",autoexpand),$(elm).on("change",autoexpand)),$(elm).on("paste",function(){setTimeout(function(){autoexpand(elm)},100)}),$(elm).on("grn.textarea:resize",autoexpand),autoexpand())},$(function(){textarea&&textarea.disableAutoInit||($("textarea.autoexpand").each(function(){grn_autoexpand_textarea($(this)[0])}),$(document).trigger("grn.textarea:initialized"))})}(jQuery);