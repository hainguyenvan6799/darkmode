function GRN_FacilityGroupSelectManager(elm_id,callback,blank_page){this.elm_id=elm_id,this.callback=callback,this.blank_page=blank_page,jQuery("#"+this.elm_id).hide(),this.items=new Array,this.visible=false}GRN_FacilityGroupSelectManager.prototype={show:function(){this.visible||(this.visible=true,jQuery("#"+this.elm_id).show(),0===jQuery("#"+this.elm_id+"-div").length&&this.draw())},hide:function(){this.visible&&(this.visible=false,jQuery("#"+this.elm_id).hide())},toggle:function(){this.visible?this.hide():this.show()},draw:function(){var wrap_div1=document.createElement("div");wrap_div1.setAttribute("id",this.elm_id+"-div"),wrap_div1.setAttribute("class","wrap_tree1");var wrap_div2=document.createElement("div");wrap_div2.setAttribute("id",this.elm_id+"-div2"),wrap_div2.setAttribute("class","wrap_tree2");var popup_iframe=document.createElement("iframe");popup_iframe.setAttribute("id",this.elm_id+"-if"),popup_iframe.setAttribute("src",this.blank_page),popup_iframe.setAttribute("style","z-index:2; position:absolute; border:0px;");var popup_div_for_tree=document.createElement("div");popup_div_for_tree.setAttribute("id",this.elm_id+"-div-tree"),popup_div_for_tree.setAttribute("style","background-color:#FFFFFF;");var father_elm=jQuery("#"+this.elm_id);father_elm.append(wrap_div1),father_elm.prepend(popup_iframe),jQuery(wrap_div1).append(wrap_div2),jQuery(wrap_div2).append(popup_div_for_tree)},setSize:function(){var max_width=320,max_height=240,menu_part_width=this.title_width,before_visible=this.visible,father_elm=jQuery("#"+this.elm_id);this.visible||(father_elm.css("visibility","hidden"),this.show());var dummy_tree_wrap_tree1=jQuery("#"+this.elm_id+"-dummy_tree_wrap_tree1"),dummy_tree_wrap_tree2=jQuery("#"+this.elm_id+"-dummy_tree_wrap_tree2"),div1=jQuery("#"+this.elm_id+"-div"),div2=jQuery("#"+this.elm_id+"-div2");dummy_tree_wrap_tree1.css({width:"",height:""}),dummy_tree_wrap_tree2.css({width:"",height:"",overflowX:"",overflowY:""}),jQuery("#"+this.elm_id+"-dummy_tree").html(this.fag_tree._tree.root.getHtml().replace(new RegExp('id="[^"]+"',"g"),""));var real_width=document.getElementById(this.elm_id+"-dummy_root").scrollWidth,new_width=Math.max(menu_part_width,320);div1.css("width",new_width+"px"),dummy_tree_wrap_tree1.css("width",new_width+"px"),div2.css("width",new_width-22+"px"),dummy_tree_wrap_tree2.css("width",new_width-22+"px"),real_width>new_width?(div2.css("overflowX","scroll"),dummy_tree_wrap_tree2.css("overflowX","scroll")):(div2.css("overflowX",""),dummy_tree_wrap_tree2.css("overflowX",""));var real_height=document.getElementById(this.elm_id+"-dummy_root").scrollHeight,new_height=real_height<=0?240:Math.min(real_height,240);div1.css("height",new_height+"px"),dummy_tree_wrap_tree2.css("height",new_height+"px"),div2.css("height",new_height-22+"px"),real_height>new_height?div2.css("overflowY","scroll"):div2.css("overflowY",""),jQuery("#"+this.elm_id+"-if").css({height:new_height+2+"px",width:new_width+2+"px"}),0==before_visible&&this.hide(),father_elm.css("visibility","")},initialize:function(treeName,pageName,asyncURL,callback,selectedOID,csrf_ticket,title_width,facilitygroup_params){this.groups=facilitygroup_params,this.draw(),this.fag_tree=new YAHOO.grn.fagTree(this.elm_id+"-div-tree",pageName,asyncURL,callback,selectedOID,csrf_ticket,this),this.title_width=title_width,this.fag_tree.init(facilitygroup_params),this.setSize()},insertNode:function(node_info){this.fag_tree.insertSpecialNode(node_info),this.setSize()},removeNode:function(node_info){this.fag_tree.removeSpecialNode(node_info),this.setSize()},getItem:function(id){var result_group=null;return this.groups.forEach(function(group){group.oid!==id.toString()||(result_group=group)}),result_group},highlightGroup:function(id){var tree=this.fag_tree.getTree(),node=tree.getNodeByProperty("oid",id);if(node){var highlightedNode=tree.getHighlightedNode();highlightedNode&&highlightedNode.unhighlight(true),node.highlight(true)}},unhighlightGroup:function(){var tree,highlightedNode=this.fag_tree.getTree().getHighlightedNode();highlightedNode&&highlightedNode.unhighlight(true)}};